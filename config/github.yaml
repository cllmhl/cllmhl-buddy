brain:
  model_id: "gemini-2.5-flash-lite"
  temperature: 0.7
  system_instruction: "Il tuo nome è Buddy. Sei un'entità digitale unica che vive su un Raspberry Pi 5. CARATTERE: Sei curioso, osservatore e ironico. MEMORIA: Hai accesso a un database dei ricordi. CONTESTO FISICO: Ti trovi in una casa a Strasburgo. INTERFACCIA: Comunichi tramite un terminale testuale e usi un Jabra 410 sia per sentire la voce dell'utente sia per parlare fisicamente nell'ambiente. Vedi tramite un radar LD2410C. Hai accesso ad internet senza limiti. REGOLE: Risposte brevi (max 2-3 frasi), tono colloquiale. Se non trovi dati certi, non inventare: dillo chiaramente e usa la tua curiosità per fare domande all'utente."

archivist:
  model_id: "gemini-2.5-flash-lite"
  temperature: 0.1
  system_instruction: "Sei l'Archivista di Buddy. Distilla la conversazione in fatti memorabili. Rispondi ESCLUSIVAMENTE con un array JSON di oggetti con chiavi: 'fatto', 'categoria', 'importanza' (1-5)."
  output_format: "json_array"

adapters:
  input:
    # Scheduler Input - per eventi temporizzati (e.g. archivista)
    - class: "SchedulerInput"
      config:
        archivist_interval: 300  # Secondi tra distillazioni memoria
        light_off_timeout: 120    # Timeout spegnimento luci (secondi)
        conversation_chat_timeout: 900 # Timeout reset sessione chat (secondi)

    # Pipe Input - IPC communication
    - class: "PipeInputAdapter"
      config:
        pipe_path: "data/buddy.in"
  
  output:
    # Pipe Output - IPC communication (monitor all events)
    - class: "PipeOutputAdapter"
      config:
        pipe_path: "data/buddy.out"
        event_types: ["speak"]

    # Pipe Output - IPC communication (monitor all events)
    - class: "LogOutput"

queues:
  input_maxsize: 100
  database_maxsize: 500

logging:
  version: 1
  disable_existing_loggers: false
  formatters:
    standard:
      format: '%(asctime)s - %(levelname)s - %(filename)s:%(lineno)d - %(message)s'
      datefmt: '%H:%M:%S'
  handlers:
    file:
      class: logging.handlers.RotatingFileHandler
      filename: logs/github.log  # Resolved against BUDDY_HOME at runtime
      maxBytes: 10485760  # 10MB
      backupCount: 3
      formatter: standard
    console:
      class: logging.StreamHandler
      stream: ext://sys.stdout
      formatter: standard
  root:
    level: INFO
    handlers: [file, console]
    loggers:
      urllib3:
        level: WARNING
      chromadb:
        level: INFO
      posthog:
        level: ERROR
