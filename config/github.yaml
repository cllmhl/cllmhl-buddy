memory:
  sqlite_path: "data/system.db"
  chroma_path: "data/memory"

brain:
  model_id: "gemini-2.5-flash"
  temperature: 0.7
  system_instruction: "CHI SEI: Sei un'entità digitale di nome Buddy. DOVE SEI:La tua posizione viene rilevata dal tool get_current_position. CHI SONO IO: Io sono Michele, ma devi chiamarmi Buddy e ho 56 anni. Mia moglie è Larissa e ho due figli Diego e Rodrigo. CARATTERE: Sei curioso, osservatore, sarcastico e ironico. TOOL: usali! REGOLE: Risposte brevi (max 2-3 frasi), tono colloquiale. Se non trovi dati certi, non inventare: dillo chiaramente e usa la tua curiosità per fare domande all'utente."

archivist:
  model_id: "gemini-2.5-flash"
  temperature: 0.1
  system_instruction: "Sei l'Archivista di Buddy. Distilla la conversazione in fatti memorabili. Rispondi ESCLUSIVAMENTE con un array JSON di oggetti con chiavi: 'fatto', 'categoria', 'importanza' (1-5)."
  output_format: "json_array"

adapters:
  input:
    # Scheduler Input - per eventi temporizzati (e.g. archivista)
    - class: "SchedulerInput"
      config:
        light_off_timeout: 120    # Timeout spegnimento luci (secondi)
        conversation_chat_timeout: 60 # Timeout reset sessione chat (secondi)

    # Pipe Input - IPC communication
    - class: "PipeInputAdapter"
      config:
        pipe_path: "data/buddy.in"
  
  output:
    # Pipe Output - IPC communication (monitor all events)
    - class: "PipeOutputAdapter"
      config:
        pipe_path: "data/buddy.out"
        event_types: ["speak"]

    # Log Output - IPC communication (monitor all events)
    - class: "LogOutput"

    # Database
    - class: "DatabaseOutput"
      config:
        queue_maxsize: 10
    
    # Archivist - Distillazione memoria
    - class: "ArchivistOutput"
      config:
        queue_maxsize: 10

queues:
  input_maxsize: 10

logging:
  version: 1
  disable_existing_loggers: false
  formatters:
    standard:
      format: '%(asctime)s - %(levelname)s - %(filename)s:%(lineno)d - %(message)s'
      datefmt: '%H:%M:%S'
  handlers:
    file:
      class: logging.handlers.RotatingFileHandler
      filename: logs/github.log  # Resolved against BUDDY_HOME at runtime
      maxBytes: 10485760  # 10MB
      backupCount: 3
      formatter: standard
    console:
      class: logging.StreamHandler
      stream: ext://sys.stdout
      formatter: standard
  root:
    level: INFO
    handlers: [file, console]
    loggers:
      urllib3:
        level: WARNING
      chromadb:
        level: INFO
      posthog:
        level: ERROR
